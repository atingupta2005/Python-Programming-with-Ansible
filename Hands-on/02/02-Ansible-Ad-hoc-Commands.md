# Ansible Adhoc Commands
 - ansible groups -m ping
 - ansible groups -m shell -a "uptime"
 - ansible groups -m shell -a "free -m"
 - ansible group2:group1 -m shell -a "free -m"
- Create another inventory file
  - vim my_inventory
- Run commands on new invetory
  - ansible -i my_inventory all  -m shell -a "free -m"
- List all modules available
  - ansible-doc -l
  - ansible-doc -l | wc -l      # Thousands of the  modules available
  - ansible-doc shell
- Playbook
  - A group of all these commands in a file
- When we run any ansible command, the modules are pushed from ansible control node to managed nodes in the directory:
  - ls ~/.ansible/tmp
  - In this directory the ansible modules are copied and ansible executes them
  - Once execution is done, ansible will delete thos
  - To stop removal
    - ANSIBLE_KEEP_REMOTE_FILES=1 ansible all -m shell -a "uptime"
  - Now check the directory again on managed node
    - ls ~/.ansible/tmp
- Ansible executes the tasks in parallel on the managed nodes.
  - By default fork is 5 in ansible.cfg
    - forks = 5
- How to test for forks
  - ansible all -m shell -a "sleep 5 ; echo 'hi'"
    - Notice that all the output from each client is received together after wait of  5 seconds
  - Now changes forks = 1 in ansible.cfg
  - ansible all -m shell -a "sleep 5 ; echo 'hi'"
    - Notice that all the output from each client is received one by one after wait of 5 seconds

